---
name: my-skill
description: 품질 게이트와 점진적 인도 구조를 갖춘 단계별 기능 계획을 수립합니다. 기능 계획, 작업 구성, 태스크 분할, 로드맵 작성 또는 개발 전략 수립 시 사용하세요. 키워드: plan, planning, phases, breakdown, strategy, roadmap, organize, structure, outline.
---

# 기능 플래너 (Feature Planner)

## 목적
다음과 같은 구조화된 단계별 계획을 생성합니다:
- 각 단계는 실행 가능한 완전한 기능을 제공합니다.
- 다음 단계로 넘어가기 전 품질 게이트(Quality Gates)를 통해 검증을 강제합니다.
- 작업 시작 전 사용자의 승인을 받습니다.
- 마크다운 체크박스를 통해 진행 상황을 추적합니다.
- 각 단계는 최대 1~4시간 이내로 구성합니다.

## 계획 수립 워크플로우

### 1단계: 요구사항 분석
1. 관련 파일을 읽고 코드베이스 아키텍처를 파악합니다.
2. 의존성 및 통합 지점을 식별합니다.
3. 복잡성과 위험 요소를 평가합니다.
4. 적절한 범위(소/중/대)를 결정합니다.

### 2단계: TDD 통합 기반의 단계별 분할
기능을 3~7개 단계로 분할하며, 각 단계는 다음을 준수해야 합니다:
- **테스트 우선 (Test-First)**: 구현 전 테스트 코드를 먼저 작성합니다.
- 작동 가능하고 테스트 가능한 기능을 인도합니다.
- 최대 1~4시간이 소요되도록 구성합니다.
- Red-Green-Refactor(실패-성공-리팩토링) 사이클을 따릅니다.
- 측정 가능한 테스트 커버리지 요구사항을 갖습니다.
- 독립적으로 롤백이 가능해야 합니다.
- 명확한 성공 기준을 갖습니다.

**단계 구조**:
- 단계 이름: 명확한 인도물 명칭
- 목표: 이 단계에서 생산되는 작동 기능
- **테스트 전략**: 테스트 유형, 커버리지 목표, 테스트 시나리오
- 태스크 (TDD 워크플로우 순서):
  1. **RED 작업**: 먼저 실패하는 테스트 작성
  2. **GREEN 작업**: 테스트를 통과시키기 위한 최소한의 코드 구현
  3. **REFACTOR 작업**: 테스트 성공을 유지하며 코드 품질 개선
- 품질 게이트: TDD 준수 여부 + 검증 기준
- 의존성: 시작 전 존재해야 하는 요소
- **커버리지 목표**: 해당 단계의 구체적인 백분율 또는 체크리스트

### 3단계: 계획 문서 생성
`resources/plan-template.md`를 사용하여 `docs/plans/PLAN_<기능명>.md`를 생성합니다.

포함 내용:
- 개요 및 목표
- 근거를 포함한 아키텍처 결정 사항
- 체크박스가 포함된 완전한 단계별 분할
- 품질 게이트 체크리스트
- 위험 평가 테이블
- 단계별 롤백 전략
- 진행 상황 추적 섹션
- 노트 및 학습 내용 영역

### 4단계: 사용자 승인
**중요**: 계속 진행하기 전에 `AskUserQuestion`을 사용하여 명시적인 승인을 받으세요.

질문 예시:
- "이 단계별 분할이 프로젝트에 적절해 보이나요?"
- "제안된 접근 방식에 대해 우려되는 점이 있으신가요?"
- "계획 문서 생성을 진행할까요?"

사용자가 승인한 후에만 계획 문서를 생성합니다.

### 5단계: 문서 생성
1. `docs/plans/` 디렉토리가 없으면 생성합니다.
2. 모든 체크박스가 해제된 상태로 계획 문서를 생성합니다.
3. 헤더에 품질 게이트에 대한 명확한 지침을 추가합니다.
4. 사용자에게 계획의 위치와 다음 단계를 안내합니다.

## 품질 게이트 표준

다음 단계로 진행하기 전에 각 단계에서 반드시 다음 항목을 검증해야 합니다:

**빌드 및 컴파일**:
- [ ] 프로젝트가 오류 없이 빌드/컴파일됨
- [ ] 구문 오류(Syntax Error) 없음

**테스트 주도 개발 (TDD)**:
- [ ] 프로덕션 코드 작성 전 테스트 코드를 작성함
- [ ] Red-Green-Refactor 사이클을 준수함
- [ ] 단위 테스트: 비즈니스 로직에 대해 80% 이상의 커버리지 확보
- [ ] 통합 테스트: 핵심 사용자 흐름 검증
- [ ] 테스트 제품군이 허용 가능한 시간(5분 이내) 내에 실행됨

**테스트**:
- [ ] 기존의 모든 테스트 통과
- [ ] 새로운 기능에 대한 새 테스트 추가
- [ ] 테스트 커버리지 유지 또는 향상

**코드 품질**:
- [ ] 린팅(Linting) 오류 없이 통과
- [ ] 타입 체크 통과 (해당되는 경우)
- [ ] 일관된 코드 포맷팅 적용
- [ ] **명명 규칙 준수**: 모든 코딩 작업(HTML, CSS, JS, 웹접근성)은 `.agent/rules/` 폴더 내의 가이드 문서를 최우선 기준으로 따릅니다.

**기능성**:
- [ ] 수동 테스트를 통해 기능 작동 확인
- [ ] 기존 기능에 대한 회귀(Regression) 오류 없음
- [ ] 예외 케이스(Edge cases) 테스트 완료

**보안 및 성능**:
- [ ] 새로운 보안 취약점 없음
- [ ] 성능 저하 없음
- [ ] 자원 사용량이 허용 범위 내에 있음

**문서화**:
- [ ] 코드 주석 업데이트
- [ ] 변경 사항이 문서에 반영됨

## 진행 상황 추적 프로토콜

계획 문서 헤더에 다음 내용을 추가하세요:

```markdown
**중요 지침**: 각 단계를 완료한 후:
1. ✅ 완료된 태스크 체크박스 체크
2. 🧪 모든 품질 게이트 검증 명령 실행
3. ⚠️ 모든 품질 게이트 항목 통과 여부 확인
4. 📅 "최종 업데이트" 날짜 갱신
5. 📝 Notes 섹션에 학습 내용 기록
6. ➡️ 그 후에만 다음 단계로 진행

⛔ 품질 게이트를 건너뛰거나 체크가 실패한 상태로 진행하지 마세요.
```

## 단계 크기 가이드라인

**소규모 범위** (2~3단계, 총 3~6시간):
- 단일 컴포넌트 또는 단순 기능
- 의존성 최소화
- 명확한 요구사항
- 예: 다크 모드 토글 추가, 새로운 폼 컴포넌트 생성

**중간 규모 범위** (4~5단계, 총 8~15시간):
- 다중 컴포넌트 또는 중간 정도의 기능
- 어느 정도의 통합 복잡성
- 데이터베이스 변경 또는 API 작업 포함
- 예: 사용자 인증 시스템, 검색 기능

**대규모 범위** (6~7단계, 총 15~25시간):
- 여러 영역에 걸친 복잡한 기능
- 상당한 아키텍처 영향
- 다중 통합 필요
- 예: 임베딩 기반 AI 검색, 실시간 협업 기능

## 위험 평가

다음을 식별하고 기록합니다:
- **기술적 위험**: API 변경, 성능 문제, 데이터 마이그레이션
- **의존성 위험**: 외부 라이브러리 업데이트, 제3자 서비스 가용성
- **일정 위험**: 복잡성 미지수, 차단 의존성
- **품질 위험**: 테스트 커버리지 공백, 회귀 오류 가능성

각 위험에 대해 다음을 명시합니다:
- 확률: 낮음/중간/높음
- 영향: 낮음/중간/높음
- 완화 전략: 구체적인 조치 단계

## 롤백 전략

각 단계마다 문제가 발생할 경우 변경 사항을 되돌리는 방법을 기록합니다.
고려 사항:
- 취소해야 할 코드 변경 사항
- 되돌려야 할 데이터베이스 마이그레이션 (해당되는 경우)
- 복구해야 할 설정 변경
- 제거해야 할 의존성

## 테스트 사양 가이드라인

### 테스트 우선 개발 워크플로우

**각 기능 컴포넌트별**:
1. **테스트 케이스 명시** (코드 작성 전)
   - 어떤 입력값을 테스트할 것인가?
   - 어떤 출력값이 기대되는가?
   - 어떤 예외 케이스를 처리해야 하는가?
   - 어떤 오류 조건이 테스트되어야 하는가?

2. **테스트 작성** (Red 단계)
   - 실패할 테스트 작성
   - 테스트가 정확한 이유로 실패하는지 확인
   - 테스트를 실행하여 실패 확인
   - TDD 준수를 추적하기 위해 실패한 테스트 커밋

3. **코드 구현** (Green 단계)
   - 테스트를 통과시키기 위한 최소한의 코드 작성
   - 테스트를 자주 실행 (2~5분 간격)
   - 모든 테스트가 통과하면 중단
   - 테스트 범위를 넘어서는 추가 기능 구현 금지

4. **리팩토링** (Blue 단계)
   - 테스트 성공을 유지하면서 코드 품질 개선
   - 중복 로직 추출
   - 이름 설정 및 구조 개선
   - 각 리팩토링 단계마다 테스트 실행
   - 리팩토링 완료 후 커밋

### 테스트 유형

**단위 테스트 (Unit Tests)**:
- **대상**: 개별 함수, 메서드, 클래스
- **의존성**: 없음 또는 모의(Mock)/스텁(Stub) 처리
- **속도**: 빠름 (테스트당 100ms 미만)
- **격리**: 외부 시스템으로부터 완전히 격리
- **커버리지**: 비즈니스 로직의 80% 이상

**통합 테스트 (Integration Tests)**:
- **대상**: 컴포넌트/모듈 간의 상호작용
- **의존성**: 실제 의존성을 사용할 수 있음
- **속도**: 보통 (테스트당 1초 미만)
- **격리**: 컴포넌트 경계를 테스트함
- **커버리지**: 핵심 통합 지점

**E2E 테스트 (End-to-End Tests)**:
- **대상**: 전체 사용자 워크플로우
- **의존성**: 실제 또는 실제와 유사한 환경
- **속도**: 느림 (수 초에서 수 분)
- **격리**: 전체 시스템 통합
- **커버리지**: 핵심 사용자 여정

### 테스트 커버리지 계산

**커버리지 임계값** (프로젝트에 따라 조정):
- **비즈니스 로직**: 90% 이상 (핵심 코드 경로)
- **데이터 액세스 계층**: 80% 이상 (리포지토리, DAO)
- **API/컨트롤러 계층**: 70% 이상 (엔드포인트)
- **UI/프레젠테이션**: 커버리지보다 통합 테스트 권장

**에코시스템별 커버리지 명령**:
```bash
# JavaScript/TypeScript
jest --coverage
nyc report --reporter=html

# Python
pytest --cov=src --cov-report=html
coverage report

# Java
mvn jacoco:report
gradle jacocoTestReport

# Go
go test -cover ./...
go tool cover -html=coverage.out

# .NET
dotnet test /p:CollectCoverage=true /p:CoverageReporter=html
reportgenerator -reports:coverage.xml -targetdir:coverage

# Ruby
bundle exec rspec --coverage
open coverage/index.html

# PHP
phpunit --coverage-html coverage
```

### 공통 테스트 패턴

**Arrange-Act-Assert (AAA) 패턴**:
```
test '동작 설명':
  // Arrange: 테스트 데이터 및 의존성 설정
  input = createTestData()

  // Act: 테스트 대상 동작 실행
  result = systemUnderTest.method(input)

  // Assert: 기대 결과 검증
  assert result == expectedOutput
```

**Given-When-Then (BDD 스타일)**:
```
test '기능이 특정 동작을 해야 함':
  // Given: 초기 컨텍스트/상태
  given userIsLoggedIn()

  // When: 동작 발생
  when userClicksButton()

  // Then: 결과 확인
  then shouldSeeConfirmation()
```

**의존성 모의/스텁 처리 (Mocking/Stubbing)**:
```
test '컴포넌트가 의존성을 호출해야 함':
  // 모의 객체 생성
  mockService = createMock(ExternalService)
  component = new Component(mockService)

  // 모의 객체 동작 설정
  when(mockService.method()).thenReturn(expectedData)

  // 실행 및 검증
  component.execute()
  verify(mockService.method()).calledOnce()
```

### 계획 내 테스트 사양

**각 단계마다 다음을 명시하세요**:
1. **테스트 파일 위치**: 테스트가 작성될 정확한 경로
2. **테스트 시나리오**: 구체적인 테스트 케이스 목록
3. **예상 실패**: 처음에 테스트가 보여주어야 할 오류는 무엇인가?
4. **커버리지 목표**: 해당 단계의 백분율
5. **모의 처리할 의존성**: 모의/스텁 처리가 필요한 항목
6. **테스트 데이터**: 필요한 픽스처/팩토리

## 관련 파일 참조
- [resources/plan-template.md](resources/plan-template.md) - 한국어 계획 문서 템플릿
